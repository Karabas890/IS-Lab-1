<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>Управление объектами</title>
        <!-- Подключение Bootstrap -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
        <style>
            /* Дополнительные стили для улучшения внешнего вида */
            .table-container {
                margin: 20px auto;
                max-width: 95%;
            }

            .tab-content {
                padding: 20px;
                border: 1px solid #dee2e6;
                border-radius: 5px;
                background-color: #f9f9f9;
            }

            .btn-action {
                margin-right: 5px;
            }

            .dialog-header {
                font-weight: bold;
                color: #dc3545;
            }
        </style>
    </h:head>

    <h:body>
        <div class="container">
            <h1 class="text-center mt-4 mb-4">Управление объектами</h1>
            <h:form id="mainForm">

                <p:tabView id="tabView" styleClass="tab-content">
                    <!-- Таблица с объектами -->
                    <p:tab id="tabObjects" title="Объекты">
                        <div class="table-container">
                            <h:dataTable id="objectTable"
                                         value="#{productBean.productList}"
                                         var="product"
                                         styleClass="table table-striped table-bordered"
                                         paginator="true"
                                         rows="10"
                                         paginatorTemplate="{FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}">

                                <!-- Колонки таблицы -->
                                <p:column headerText="ID">
                                    <h:outputText value="#{product.id}" />
                                </p:column>
                                <p:column headerText="Название">
                                    <h:outputText value="#{product.name}" />
                                </p:column>
                                <p:column headerText="Координаты">
                                    <h:outputText value="#{product.coordinates.id}" />
                                </p:column>
                                <p:column headerText="Дата создания">
                                    <h:outputText value="#{product.creationDate}" />
                                </p:column>
                                <p:column headerText="Ед. измерения">
                                    <h:outputText value="#{product.unitOfMeasure}" />
                                </p:column>
                                <p:column headerText="Мануфактура">
                                    <h:outputText value="#{product.manufacturer.id}" />
                                </p:column>
                                <p:column headerText="Цена">
                                    <h:outputText value="#{product.price}" />
                                </p:column>
                                <p:column headerText="Цена производства">
                                    <h:outputText value="#{product.manufactureCost}" />
                                </p:column>
                                <p:column headerText="Рейтинг">
                                    <h:outputText value="#{product.rating}" />
                                </p:column>
                                <p:column headerText="Парт. номер">
                                    <h:outputText value="#{product.partNumber}" />
                                </p:column>
                                <p:column headerText="Владелец">
                                    <h:outputText value="#{product.owner.id}" />
                                </p:column>

                                <!-- Действия: редактирование, удаление -->
                                <p:column headerText="Действия">
                                    <div class="btn-group">
                                        <h:commandLink value="Редактировать"
                                                       action="#{productBean.editProduct(product.id)}"
                                                       styleClass="btn btn-primary btn-sm btn-action" />
                                        <h:commandLink value="Удалить"
                                                       action="#{productBean.deleteProduct(product.id)}"
                                                       process="@form"
                                                       update="@form"
                                                       styleClass="btn btn-danger btn-sm btn-action"
                                                       oncomplete="PF('deleteDialog').show()" />
                                    </div>
                                </p:column>
                            </h:dataTable>
                        </div>
                    </p:tab>

                    <!-- Вкладка создания нового объекта -->
                    <p:tab id="tabCreate" title="Создать новый объект">
                        <h:link value="Создать новый продукт" outcome="createProduct.xhtml"
                                styleClass="btn btn-success" />
                    </p:tab>

                    <!-- Вкладка получения информации по ID -->
                    <p:tab id="tabInfo" title="Информация по ID">
                        <div class="form-group">
                            <h:outputLabel for="productId" value="Введите ID продукта" styleClass="form-label" />
                            <h:inputText id="productId" value="#{productBean.productId}" required="true" styleClass="form-control" />
                            <h:commandButton value="Получить информацию"
                                             action="#{productBean.getProductById}"
                                             styleClass="btn btn-info mt-2" />
                        </div>
                    </p:tab>

                    <!-- Вкладка обновления объекта -->
                    <p:tab id="tabUpdate" title="Обновить объект">
                        <p:commandButton value="Обновить объект"
                                         action="#{productBean.updateProduct}"
                                         styleClass="btn btn-warning" />
                    </p:tab>

                    <!-- Вкладка удаления объекта -->
                    <p:tab id="tabDelete" title="Удалить объект">
                        <p:commandButton value="Удалить объект"
                                         action="#{productBean.deleteProduct}"
                                         styleClass="btn btn-danger" />
                    </p:tab>
                </p:tabView>

                <!-- Диалог удаления -->
                <p:dialog header="Удаление объекта"
                          id="deleteDialog"
                          modal="true"
                          styleClass="dialog-header">
                    <p:outputLabel value="#{productBean.deleteDialogContent}" />
                </p:dialog>

            </h:form>
        </div>
    </h:body>
</ui:composition>
